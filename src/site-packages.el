;;; -*- lexical-binding: t; -*-
;;; site-packages.el --- Entry point
;;; Commentary:
;;; Code:

(require 'use-package)

(use-package flyspell
  :commands (flyspell-mode))

(use-package pollen-markup-mode
  :mode "\\.pm\\'"
  :hook
  ((pollen-markup-mode . flyspell-mode)
   (pollen-markup-mode . abbrev-mode)))

(use-package project+
  :commands (project-bookmarks-add
	     project-bookmarks-remove)
  :bind-keymap
  ("C-c p" . project-command-map)
  :config
  (project+-mode))


(use-package dashboard)

(use-package site:lorri
  :commands (site:lorri-start site:lorri-init))

(use-package site:ammonite
  :commands (site:ammonite))

(defun site:tramp-su-current-buffer ()
  "Use `tramp' to root access the current buffer."
  (interactive)
  (let*
      ((buf (current-buffer))
       (file (buffer-file-name buf))
       (pos (point)))
    (when file
      ;; TODO Please make sure this doesn't work if we're currently in su mode
      (find-file (format "/su:root@%s:%s" (system-name) file))
      (kill-buffer buf)
      (goto-char pos))))

(provide 'site-packages)
